# KCSDA-airflow

## Задача
Каждый день накапливать информацию по приложению с лентой и мессенджером в многомерном кубе.
Куб должен иметь следующую структуру:
- Дата - event_date
- Название среза - dimension (os, gender и age)
- Значение среза - dimension_value
- Число просмотров - views
- Число лайков - likes
- Число полученных сообщений - messages_received
- Число отправленных сообщений - messages_sent
- От скольких пользователей получили сообщения - users_received
- Скольким пользователям отправили сообщение - users_sent

## Реализация
- Считать даг за каждый вчерашний день
- Параллельная обработка таблиц две таблицы.
  - В feed_actions для каждого юзера считаем число просмотров и лайков контента.
  - В message_actions для каждого юзера считаем, сколько он получает и отсылает сообщений, скольким людям он пишет, сколько людей пишут ему.
- Объединение таблиц
- Считаем все метрики в разрезе по полу, возрасту и ос. Параллельно (по таску на каждый срез)
- Добавление данных в многомерный куб

## Stack
- python
  - datetime
  - pandas
  - numpy
  - pandahouse
  - matplotlib
  - seaborn
- airflow
